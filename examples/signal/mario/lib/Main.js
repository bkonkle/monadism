!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Mario=e():t.Mario=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="2Pgx")}({"2Pgx":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.main=void 0;var r,o=(r=n("Sgzc"))&&r.__esModule?r:{default:r},i=n("RJlM"),u=n("PIvJ"),c=n("lJmG");function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=37,f=39,l=32,d=function(t){return function(e){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){a(t,e,n[e])})}return t}({},e,{mario:(0,c.marioLogic)(t)(e.mario)})}},p=function(t){return function(){return(0,u.updateSprite)((0,u.updatePosition)(t.mario))}},m=function(t){return function(e){return function(n){return{left:t,right:e,jump:n}}}},v=function(){(0,u.onDOMContentLoaded)(function(){var t=(0,i.animationFrame)(),e={mario:{node:(0,u.getMarioNode)(),x:-50,y:0,dx:3,dy:6,dir:c.Direction.Right}},n=(0,i.keyPressed)(s),r=(0,i.keyPressed)(f),a=(0,i.keyPressed)(l).apply(r.apply(n.map(m))),v=t.sampleOn(a).foldp(d,e).map(p);o.default.run(v)})};e.main=v,n.c[n.s]===t&&v()}).call(this,n("YuTi")(t))},"8oxB":function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var a,s=[],f=!1,l=-1;function d(){f&&a&&(f=!1,a.length?s=a.concat(s):l=-1,s.length&&p())}function p(){if(!f){var t=c(d);f=!0;for(var e=s.length;e;){for(a=s,s=[];++l<e;)a&&a[l].run();l=-1,e=s.length}a=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||f||c(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},PIvJ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getMarioNode=e.onDOMContentLoaded=e.updateSprite=e.updatePosition=void 0;var r=n("lJmG");e.updatePosition=function(t){return t.node.style.left="".concat(t.x,"px"),t.node.style.bottom="".concat(t.y+40,"px"),t};e.updateSprite=function(t){return t.node.className=(0,r.charSpriteDescriptor)(t),t};e.onDOMContentLoaded=function(t){"interactive"===document.readyState?t():document.addEventListener("DOMContentLoaded",t)};e.getMarioNode=function(){return document.getElementById("mario")||document.body}},RJlM:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.windowDimensions=e.animationFrame=e.mousePos=e.tap=e.touch=e.mouseButtonPressed=e.mouseButton=e.keyPressed=e.MouseButton=void 0;var r,o,i=(r=n("xEkU"))&&r.__esModule?r:{default:r},u=n("Sgzc");e.MouseButton=o,function(t){t[t.MouseLeftButton=0]="MouseLeftButton",t[t.MouseMiddleButton=1]="MouseMiddleButton",t[t.MouseIE8MiddleButton=2]="MouseIE8MiddleButton",t[t.MouseRightButton=3]="MouseRightButton"}(o||(e.MouseButton=o={}));e.keyPressed=function(t){var e=(0,u.constant)(!1);return window.addEventListener("keydown",function(n){n.keyCode===t&&e.set(!0)}),window.addEventListener("keyup",function(n){n.keyCode===t&&e.set(!1)}),e};var c=function(t){var e=(0,u.constant)(!1);return window.addEventListener("mousedown",function(n){n.button===t&&e.set(!0)}),window.addEventListener("mouseup",function(n){n.button===t&&e.set(!1)}),e};e.mouseButton=c;e.mouseButtonPressed=function(t){return t===o.MouseLeftButton?c(0):t===o.MouseRightButton?c(2):t===o.MouseMiddleButton?c(2):c(4)};var a=function(){var t=(0,u.constant)([]),e=function(e){for(var n=[],r=e.touches.length,o=0;o<r;o+=1){var i=e.touches.item(o);i&&n.push(i)}t.set(n)};return window.addEventListener("touchstart",e),window.addEventListener("touchend",e),window.addEventListener("touchmove",e),window.addEventListener("touchcancel",e),t};e.touch=a;e.tap=function(){return a().map(function(t){return t!==[]})};e.mousePos=function(){var t=(0,u.constant)({x:0,y:0});return window.addEventListener("mousemove",function(e){if(void 0!==e.pageX&&void 0!==e.pageY)t.set({x:e.pageX,y:e.pageY});else{if(void 0===e.clientX||void 0===e.clientY)throw new Error("Mouse event has no coordinates I recognise!");t.set({x:e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:e.clientY+document.body.scrollTop+document.documentElement.scrollTop})}}),t};e.animationFrame=function(){var t=(0,u.constant)(Date.now());return(0,i.default)(function e(n){t.set(n),(0,i.default)(e)}),t};e.windowDimensions=function(){var t=(0,u.constant)({w:window.innerWidth,h:window.innerHeight});return window.addEventListener("resize",function(){t.set({w:window.innerWidth,h:window.innerHeight})}),t}},Sgzc:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.every=e.unwrap=e.run=e.constant=e.default=void 0;var r=n("kMv7");function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"value",void 0),o(this,"subscriptions",[]),o(this,"map",function(t){var e=u(t(n.get()));return n.subscribe(function(n){e.set(t(n))}),e}),o(this,"then",function(t){return t(n.get())}),o(this,"apply",function(t){var e=u(t.value(n.get())),r=function(){e.set(t.value(n.get()))};return t.subscribe(r),n.subscribe(r),e}),o(this,"merge",function(t){var e=u(n.get());return t.subscribe(e.set),n.subscribe(e.set),e}),o(this,"foldp",function(t,e){var r=e,o=u(r);return n.subscribe(function(e){r=t(e)(r),o.set(r)}),o}),o(this,"sampleOn",function(t){var e=u(t.get());return n.subscribe(function(){e.set(t.get())}),e}),o(this,"dropRepeats",function(){var t=n.get(),e=u(t);return n.subscribe(function(n){(0,r.eq)(t,n)||(t=n,e.set(t))}),e}),o(this,"filter",function(t,e){var r=u(t(n.get())?n.get():e);return n.subscribe(function(e){t(e)&&r.set(e)}),r}),o(this,"flatten",function(t){var e=t,o=n.get();if(Array.isArray(o)){var i=(0,r.empty)(),c=o.slice();c.length>0?e=c[0]:c=i;var a=u(e),s=function(t){t.forEach(a.set)};return setTimeout(function(){n.subscribe(function(t){c===i?s(t):(s(c.slice(1)),c=i)})},0),a}throw new Error("Cannot flatten a value that is not an array")}),o(this,"on",function(t){return n.subscribe(function(e){t(e)}),n}),o(this,"delay",function(t){var e=u(n.get()),r=!0;return n.subscribe(function(n){r?r=!1:setTimeout(function(){e.set(n)},t)}),e}),o(this,"since",function(t){var e,r=u(!1),o=!0,i=function(){r.set(!1),e=void 0};return n.subscribe(function(){o?o=!1:void 0===e?(r.set(!0),e=setTimeout(i,t)):(clearTimeout(e),e=setTimeout(i,t))}),r}),o(this,"get",function(){return n.value}),o(this,"set",function(t){n.value=t;var e=!0,r=!1,o=void 0;try{for(var i,u=n.subscriptions[Symbol.iterator]();!(e=(i=u.next()).done);e=!0){(0,i.value)(t)}}catch(t){r=!0,o=t}finally{try{e||null==u.return||u.return()}finally{if(r)throw o}}}),o(this,"subscribe",function(t){n.subscriptions.push(t),t(n.get())}),this.value=e};e.default=i,o(i,"constant",function(t){return new i(t)}),o(i,"run",function(t){return t.subscribe(function(t){return t()})}),o(i,"unwrap",function(t){var e=u(t.get()());return t.subscribe(function(t){e.set(t())}),e}),o(i,"every",function(t){var e=u(Date.now());return setInterval(function(){e.set(Date.now())},t),e});var u=i.constant;e.constant=u;var c=i.run;e.run=c;var a=i.unwrap;e.unwrap=a;var s=i.every;e.every=s},YuTi:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},bQgK:function(t,e,n){(function(e){(function(){var n,r,o,i,u,c;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:null!=e&&e.hrtime?(t.exports=function(){return(n()-u)/1e6},r=e.hrtime,i=(n=function(){var t;return 1e9*(t=r())[0]+t[1]})(),c=1e9*e.uptime(),u=i-c):Date.now?(t.exports=function(){return Date.now()-o},o=Date.now()):(t.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(this,n("8oxB"))},kMv7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.eq=function t(e,n){if(Array.isArray(e)&&Array.isArray(n))return e.length>0&&e.length===n.length&&e.map(function(e,r){return t(e,n[r])}).reduce(function(t,e){return t&&Boolean(e)});if(e&&e.equals)return e.equals(n);return e===n},e.compose=e.exists=e.empty=void 0;e.empty=function(){return{_tag:"EMPTY"}};e.exists=function(t){return null!=t};e.compose=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce(function(t,e){return function(n){return t(e(n))}},t)}},lJmG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.marioLogic=e.charSpriteDescriptor=e.Direction=e.Activity=void 0;var r,o,i=n("kMv7");function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){c(t,e,n[e])})}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.Activity=r,function(t){t.Walking="walk",t.Standing="stand",t.Jumping="jump"}(r||(e.Activity=r={})),e.Direction=o,function(t){t.Left="left",t.Right="right"}(o||(e.Direction=o={}));var a=function(t){return t.y>0};e.charSpriteDescriptor=function(t){return"character ".concat(function(t){return a(t)?r.Jumping:function(t){return 0===t.dx}(t)?r.Jumping:r.Walking}(t)," ").concat(t.dir)};var s=function(t){return a(t)?.04:.06},f=function(t){return a(t)?.02:.1},l=function(t){return u({},t,{x:t.x+t.dx,y:t.y+t.dy})},d=function(t){return t.y<=-t.dy?u({},t,{y:0,dy:0}):u({},t,{dy:t.dy-.15})},p=function(t,e){return function(n){return t&&!e?u({},n,{dx:Math.max(-2.5,n.dx-s(n)),dir:o.Left}):e&&!t?u({},n,{dx:Math.min(2.5,n.dx+s(n)),dir:o.Right}):function(t){return 0===t.dx?t:Math.abs(t.dx)<=f(t)?u({},t,{dx:0}):t.dx>0?u({},t,{dx:t.dx-f(t)}):u({},t,{dx:t.dx+f(t)})}(n)}};e.marioLogic=function(t){return(0,i.compose)(l,d,p(t.left,t.right),(e=t.jump,function(t){return e&&!a(t)?u({},t,{dy:4+.8*Math.abs(t.dx)}):!e&&a(t)&&t.dy>0?u({},t,{dy:t.dy-.15}):t}));var e}},xEkU:function(t,e,n){(function(e){for(var r=n("bQgK"),o="undefined"==typeof window?e:window,i=["moz","webkit"],u="AnimationFrame",c=o["request"+u],a=o["cancel"+u]||o["cancelRequest"+u],s=0;!c&&s<i.length;s++)c=o[i[s]+"Request"+u],a=o[i[s]+"Cancel"+u]||o[i[s]+"CancelRequest"+u];if(!c||!a){var f=0,l=0,d=[];c=function(t){if(0===d.length){var e=r(),n=Math.max(0,1e3/60-(e-f));f=n+e,setTimeout(function(){var t=d.slice(0);d.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(f)}catch(t){setTimeout(function(){throw t},0)}},Math.round(n))}return d.push({handle:++l,callback:t,cancelled:!1}),l},a=function(t){for(var e=0;e<d.length;e++)d[e].handle===t&&(d[e].cancelled=!0)}}t.exports=function(t){return c.call(o,t)},t.exports.cancel=function(){a.apply(o,arguments)},t.exports.polyfill=function(t){t||(t=o),t.requestAnimationFrame=c,t.cancelAnimationFrame=a}}).call(this,n("yLpj"))},yLpj:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n}}).default});